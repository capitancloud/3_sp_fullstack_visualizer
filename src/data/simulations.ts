import { Simulation, ArchitectureComponent } from '@/types/simulation';

export const architectureComponents: ArchitectureComponent[] = [
  {
    id: 'browser',
    type: 'browser',
    name: 'Browser',
    description: 'Il client che l\'utente usa per interagire con l\'applicazione',
    icon: 'Monitor',
    position: { x: 100, y: 200 },
  },
  {
    id: 'frontend',
    type: 'frontend',
    name: 'Frontend',
    description: 'L\'interfaccia utente (React, Vue, HTML/CSS/JS)',
    icon: 'Layout',
    position: { x: 300, y: 200 },
  },
  {
    id: 'backend',
    type: 'backend',
    name: 'Backend API',
    description: 'Il server che processa le richieste (Node.js, Python, Java)',
    icon: 'Server',
    position: { x: 500, y: 200 },
  },
  {
    id: 'database',
    type: 'database',
    name: 'Database',
    description: 'Dove vengono salvati i dati (PostgreSQL, MongoDB)',
    icon: 'Database',
    position: { x: 700, y: 200 },
  },
  {
    id: 'auth',
    type: 'external',
    name: 'Auth Service',
    description: 'Servizio di autenticazione esterno',
    icon: 'Shield',
    position: { x: 500, y: 80 },
  },
  {
    id: 'email',
    type: 'external',
    name: 'Email Service',
    description: 'Servizio per l\'invio di email',
    icon: 'Mail',
    position: { x: 700, y: 80 },
  },
];

export const simulations: Simulation[] = [
  {
    id: 'login',
    name: 'Login Utente',
    description: 'Vedi come funziona l\'autenticazione di un utente',
    steps: [
      {
        id: 1,
        from: 'browser',
        to: 'frontend',
        data: '{ email, password }',
        description: 'L\'utente inserisce email e password nel form di login',
        type: 'request',
      },
      {
        id: 2,
        from: 'frontend',
        to: 'backend',
        data: 'POST /api/login',
        description: 'Il frontend invia una richiesta HTTP POST al backend',
        type: 'request',
      },
      {
        id: 3,
        from: 'backend',
        to: 'database',
        data: 'SELECT * FROM users',
        description: 'Il backend cerca l\'utente nel database',
        type: 'request',
      },
      {
        id: 4,
        from: 'database',
        to: 'backend',
        data: '{ user: {...} }',
        description: 'Il database restituisce i dati dell\'utente',
        type: 'response',
      },
      {
        id: 5,
        from: 'backend',
        to: 'auth',
        data: 'generateToken(userId)',
        description: 'Il backend genera un token JWT per l\'autenticazione',
        type: 'request',
      },
      {
        id: 6,
        from: 'auth',
        to: 'backend',
        data: '{ token: "eyJhbG..." }',
        description: 'Il servizio auth restituisce il token',
        type: 'response',
      },
      {
        id: 7,
        from: 'backend',
        to: 'frontend',
        data: '200 OK { token, user }',
        description: 'Il backend risponde con successo e il token',
        type: 'response',
      },
      {
        id: 8,
        from: 'frontend',
        to: 'browser',
        data: 'localStorage.setItem()',
        description: 'Il frontend salva il token e mostra la dashboard',
        type: 'response',
      },
    ],
  },
  {
    id: 'register',
    name: 'Registrazione',
    description: 'Il flusso completo di registrazione di un nuovo utente',
    steps: [
      {
        id: 1,
        from: 'browser',
        to: 'frontend',
        data: '{ nome, email, password }',
        description: 'L\'utente compila il form di registrazione',
        type: 'request',
      },
      {
        id: 2,
        from: 'frontend',
        to: 'backend',
        data: 'POST /api/register',
        description: 'Il frontend valida i dati e li invia al backend',
        type: 'request',
      },
      {
        id: 3,
        from: 'backend',
        to: 'database',
        data: 'INSERT INTO users',
        description: 'Il backend crea un nuovo record nel database',
        type: 'request',
      },
      {
        id: 4,
        from: 'database',
        to: 'backend',
        data: '{ id: 123, ... }',
        description: 'Il database conferma la creazione dell\'utente',
        type: 'response',
      },
      {
        id: 5,
        from: 'backend',
        to: 'email',
        data: 'sendWelcomeEmail()',
        description: 'Il backend invia un\'email di benvenuto',
        type: 'request',
      },
      {
        id: 6,
        from: 'email',
        to: 'backend',
        data: '{ sent: true }',
        description: 'Il servizio email conferma l\'invio',
        type: 'response',
      },
      {
        id: 7,
        from: 'backend',
        to: 'frontend',
        data: '201 Created',
        description: 'Il backend conferma la registrazione avvenuta',
        type: 'response',
      },
      {
        id: 8,
        from: 'frontend',
        to: 'browser',
        data: 'redirect("/login")',
        description: 'Il frontend reindirizza alla pagina di login',
        type: 'response',
      },
    ],
  },
  {
    id: 'load-data',
    name: 'Carica Dati',
    description: 'Come vengono caricati i dati da una pagina',
    steps: [
      {
        id: 1,
        from: 'browser',
        to: 'frontend',
        data: 'navigate("/dashboard")',
        description: 'L\'utente naviga alla dashboard',
        type: 'request',
      },
      {
        id: 2,
        from: 'frontend',
        to: 'backend',
        data: 'GET /api/posts',
        description: 'Il frontend richiede i dati al backend con il token',
        type: 'request',
      },
      {
        id: 3,
        from: 'backend',
        to: 'auth',
        data: 'verifyToken()',
        description: 'Il backend verifica che il token sia valido',
        type: 'request',
      },
      {
        id: 4,
        from: 'auth',
        to: 'backend',
        data: '{ valid: true, userId: 123 }',
        description: 'Il servizio auth conferma l\'autenticazione',
        type: 'response',
      },
      {
        id: 5,
        from: 'backend',
        to: 'database',
        data: 'SELECT * FROM posts',
        description: 'Il backend richiede i post dal database',
        type: 'request',
      },
      {
        id: 6,
        from: 'database',
        to: 'backend',
        data: '[{ post1 }, { post2 }...]',
        description: 'Il database restituisce la lista dei post',
        type: 'response',
      },
      {
        id: 7,
        from: 'backend',
        to: 'frontend',
        data: '200 OK { posts: [...] }',
        description: 'Il backend risponde con i dati formattati',
        type: 'response',
      },
      {
        id: 8,
        from: 'frontend',
        to: 'browser',
        data: 'render(posts)',
        description: 'Il frontend mostra i post nella UI',
        type: 'response',
      },
    ],
  },
];
